@startuml
title TechVibe components
left to right direction

actor User

rectangle "Frontend (React/TS)" as Frontend

User ..> Frontend

frame "backend" {
database "Azure Blob Storage" as Blob {
    folder "results" {
        folder "<uuid>" {
            rectangle summary.json
            rectangle job_metadata.json
            rectangle audio.mp3
            rectangle transcript.json
            rectangle video_metadata.json
        }
   }
}

rectangle "Azure Functions" as Functions {
    component "api" as F0
    component "downloader" as F1
    component "speech_to_text" as F2
    component "nlp" as F3
}

package "queues" {
    component "New" as SQ <<queue>>
    component "Downloaded" as DQ <<queue>>
    component "Transcribed" as TQ <<queue>>
  }

interface "write/read" as wr
interface "Sends the video link" as send1
interface "Sends the downloaded video" as send2
interface "Sends the transcript" as send3
interface "Reads the download link" as read1
interface "Downloads the video for transcription" as read2
interface "Reads the transcript" as read3

wr -down- [Blob]
send1 -down- [SQ]
send2 -down- [DQ]
send3 -down- [TQ]
read1 -down- [F1]
read2 -down- [F2]
read3 -down- [F3]

Functions ..> wr
F0 ..> send1
F1 ..> send2
F2 ..> send3
SQ ..> read1
DQ ..> read2
TQ ..> read3
}

interface POST
interface GET
'interface write_read
'interface sends as send1
'interface sends as send2
'interface sends as send3
'interface reads as read1
'interface reads as read2
'interface reads as read3

POST -down- [F0]
GET -down- [F0]
'write_read -down- [Blob]
'send1 -down- [SQ]
'send2 -down- [DQ]
'send3 -down- [TQ]
'read1 -down- [F1]
'read2 -down- [F2]
'read3 -down- [F3]

Frontend ..> POST: use
Frontend ..> GET: use
'Functions ..> write_read
'F0 ..> send1
'F1 ..> send2
'F2 ..> send3
'SQ ..> read1
'DQ ..> read2
'TQ ..> read3

@enduml